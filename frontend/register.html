<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <!-- favicon------------------------------->
    <link
      rel="shortcut icon"
      href="./images/main_logo.png"
      type="image/x-icon"
    />

    <!-- font-awesome ---------------------------->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css"
      integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />

    <link rel="stylesheet" href="CSS/login.css" />
    <link rel="stylesheet" href="CSS/global.css" />
    <link rel="stylesheet" href="CSS/navbar.css" />
  </head>
  <body>
    <div class="navbar" id="nav">
      <div>
        <div class="logo">
          <a href="./index.html">
            <img src="./images//main_logo.png" alt="" />
          </a>
        </div>
        <div class="dropdown">
          <button class="btn">
            Women
            <i class="fa fa-caret-down"></i>
          </button>
          <div class="dropdown-menu">
            <a href="#">Item 1</a>
            <a href="#">Item 2</a>
            <a href="#">Item 3</a>
          </div>
        </div>
        <div class="dropdown">
          <button class="btn">
            <span> men</span>
            <i class="fa fa-caret-down"></i>
          </button>
          <div class="dropdown-menu">
            <a href="#">Item 1</a>
            <a href="#">Item 2</a>
            <a href="#">Item 3</a>
          </div>
        </div>
        <div class="dropdown">
          <button class="btn">
            kids
            <i class="fa fa-caret-down"></i>
          </button>
          <div class="dropdown-menu">
            <a href="#">Item 1</a>
            <a href="#">Item 2</a>
            <a href="#">Item 3</a>
          </div>
        </div>
        <div class="dropdown">
          <button class="btn">
            home
            <i class="fa fa-caret-down"></i>
          </button>
          <div class="dropdown-menu">
            <a href="#">Item 1</a>
            <a href="#">Item 2</a>
            <a href="#">Item 3</a>
          </div>
        </div>
        <div class="dropdown">
          <button class="btn">offers</button>
        </div>
        <a href="#" style="font-size: 15px" class="icon" onclick="myFunction()"
          >☰
        </a>
      </div>

      <div id="right_nav">
        <div>
          <i class="fa-solid fa-magnifying-glass"></i>

          <p>SEARCH</p>
        </div>

        <div>
          <i class="fa-solid fa-cart-shopping"></i>

          <p>CART</p>
        </div>

        <div>
          <i class="fa-solid fa-user"></i>

          <p>PROFILE</p>
        </div>
        <div id="searchBox" class="serch_item">
          <div>
            <div class="serch_item" id="serch_cancle">✖️</div>
          </div>
          <input class="serch_item" type="search" name="" id="" />
          <div class="serch_item" id="serch_icon">
            <i class="fa-solid fa-magnifying-glass"></i>
          </div>
        </div>
      </div>
    </div>
    <div class="right_box">
      <div class="form_box">
        <h1>Create an Account</h1>
        <form action="signin">
          <div class="name">
            <div class="first_name">
              <label for=""><p>* Name:</p></label>
              <input required id="first_name" placeholder=" Name" type="text" />
            </div>
          </div>
          <label><p>*Your Mobile:</p></label>
          <input id="mob" required placeholder="Mobile" type="number" />
          <label><p>*Your Email:</p></label>
          <input id="email" required placeholder="Email Address" type="email" />
          <label><p>*Password:</p></label>
          <input id="pass" required placeholder="Password" type="password" />
          <label><p>*Confirm Password:</p></label>
          <input id="pass2" required placeholder="Password" type="password" />

          <input type="submit" value="CREATE ACCOUNT" />
        </form>
        <div id="new_customer">
          <h6>Have an Account ?</h6>
          <a id="signinbtn" href="loginuser.html"> SIGN IN HERE</a>
        </div>
      </div>
    </div>
    <script>
      let users = JSON.parse(localStorage.getItem("users")) || [];

      let form = document.querySelector("form");

      let email = document.getElementById("email");
      let pass = document.getElementById("pass");

      form.addEventListener("submit", (e) => {
        e.preventDefault();
        if (form.pass.value !== form.pass2.value) {
          alert("Password did not match");
        } else {
          let userdata = {
            email: form.email.value,
            username: form.first_name.value,
            mobile: form.mob.value,
            password: form.pass.value,
          };
          fetch(`https://inquisitive-gray-hedgehog.cyclic.app/users/register`, {
            method: "POST",
            headers: {
              "content-type": "application/json",
            },
            body: JSON.stringify(userdata),
          })
            .then(function (response) {
              return response.json();
            })
            .then((data) => {
              console.log(data);

              if (data.message) {
                alert(data.message);
                window.location.href = "./loginuser.html";
              } else {
                console.log(data);
                alert("Registration Successful ");
                window.location.href = "./index.html";
              }
            })
            .catch((err) => {
              console.log(err);
            });
        }
      });
    </script>
  </body>
  <script src="./JS/logincheck.js"></script>
</html>
